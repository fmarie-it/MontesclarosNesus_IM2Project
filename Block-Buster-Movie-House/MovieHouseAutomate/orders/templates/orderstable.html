{% load static %}
<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7 no-js" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8 no-js" lang="en-US">
<![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html lang="en" class="no-js">

<!-- celebritylist11:56-->

<head>
	{% block headerinclude %}
	<!-- Basic need -->
	<title>Block Buster Movie House</title>
	<meta charset="UTF-8">
	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta name="author" content="">
	<link rel="profile" href="#">
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

	<!-- Data Tables CSS -->

	<!-- Data Tables CSS with Extension features -->
	<link rel="stylesheet" type="text/css"
		href="https://cdn.datatables.net/v/bs4/jszip-2.5.0/dt-1.10.21/b-1.6.3/b-html5-1.6.3/datatables.min.css" />

	<!--Google Font-->
	<link rel="stylesheet" href='http://fonts.googleapis.com/css?family=Dosis:400,700,500|Nunito:300,400,600' />
	<!-- Mobile specific meta -->
	<meta name=viewport content="width=device-width, initial-scale=1">
	<meta name="format-detection" content="telephone-no">

	<!-- Icon library -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<!-- CSS files -->
	<link rel="stylesheet" href="{% static 'css/plugins.css' %}">
	<link rel="stylesheet" href="{% static 'css/style.css' %}">
	{% endblock headerinclude %}
</head>

<body>
	{% block content %}
	<!--preloading-->
	<div id="preloader">
		<img class="logo" src="{% static 'images/logo1.png' %}" alt="" width="119" height="58">
		<div id="status">
			<span></span>
			<span></span>
		</div>
	</div>
	<!--end of preloading-->

	<!-- BEGIN | Header -->
	<header class="ht-header">
		<div class="container">
			<nav class="navbar navbar-default navbar-custom">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header logo">
					<a href="{% url 'index_view' %}"><img class="logo" src="{% static 'images/logo1.png' %}" alt="" width="119"
							height="58"></a>
				</div>

				<div class="collapse navbar-collapse flex-parent" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav flex-child-menu menu-left">
						<li class="hidden">
							<a href="#page-top"></a>
						</li>
						<li class="dropdown first">
							<a href="{% url 'index_view' %}" class="btn btn-default dropdown-toggle lv1">
							Home</a>
						</li>
					</ul>
				</div>
			</nav>
		</div>
	</header>
	<!-- END | Header -->

	<div class="hero common-hero">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div class="hero-ct">
						<h1>Dashboard</h1>
						<ul class="breadcumb">
							<li class="active"><a href="{% url 'index_view' %}">Home</a></li>
							<li> <span class="ion-ios-arrow-right"></span>Dashboard</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>

    <!-- dvd list section-->
	<div class="buster-light">
		<div class="page-single">
			<div class="container">
				<div class="float-right">
					<form action="orders">{% csrf_token %}<a href="{% url 'orders:orders_view' %}" class="redbtn" id="view">ADD Order</a>
				</div>
				<!--************************** DATE RANGE**************************-->
				<p>FROM</p>
				<input id="min" name="min" type="date">
				<p>TO</p>
				<input id="max" name="max" type="date">
				<!--************************** RESET BUTTON FOR DATE RANGE************************-->
				<button id="resetDateRange" name="resetDateRange" class="btn-primary">Reset</button>

				<!-- *******INSERT THIS TO YOUR TABLES SECTION************ -->
				<table id="ordersTable" class="table table-responsive-md">
					<thead>
						<tr>
							<th>First Name</th>
							<th>Last Name</th>
							<th>DVD Title</th>
							<th>Date Ordered</th>
							<th>Phone Number</th>
                            <th>Email</th>
                            <th>Quantity</th>
                            <th>Delivery Status</th>
							<th data-sort="false"></th>
						</tr>
					</thead>
					<tbody>
					{% for entry in Orders %}
						<tr>
							<td>{{entry.customer_first}}</td>
							<td>{{entry.customer_last}}</td>
							<td>{{entry.dvd_title}}</td>
							<td>{{entry.order_date}}</td>
							<td>{{entry.phone}}</td>
                            <td>{{entry.email}}</td>
                            <td>{{entry.quantity}}</td>
                            <td>{{entry.sent}}</td>
							<td class="text-center">
								<div class="button-container">
									<button type="button" class="btn btn-sm mr-2 mb-2 w-auto" data-toggle="modal"
										data-target="#viewDVD-{{entry.order_id}}" style="font-size: 16px">
										<i class="fa fa-eye"></i>
									</button>
									<button type="button" class="btn btn-sm mr-2 mb-2 w-auto" data-toggle="modal"
										data-target="#deleteDVD-{{entry.order_id}}" style="font-size: 16px">
										<i class="fa fa-trash"></i>
									</button>
								</div>
							</td>
							
							<!-- Delete DVD Modal -->
							<div class="modal fade" id="deleteDVD-{{entry.sku}}">
								<div class="modal-dialog modal-l">
									<div class="modal-content">
										<!-- Modal Header -->
										<div class="modal-header">
											<h4 class="modal-title">Delete Record</h4>
											<button type="button" class="close" data-dismiss="modal">&times;</button>
										</div>
										<!-- Modal body -->
										<form id="deleteForm" method="POST">{% csrf_token %}
											<div class="modal-body">
												<!-- Question  -->
												<!-- Hidden id number for confirming delete -->
												<input name="sku" type="number" class="form-control" id="sku" value={{entry.sku}} required hidden>
												<h6>Are you sure you want to delete this record?</h6>
												<button id="delete_d_no" type="button" class="btn btn-secondary mt-3 float-right btn-md ml-3"
													data-dismiss="modal">No</button>
												<button id="delete_dvd" name="delete_dvd" type="submit" class="btn btn-danger mt-3 float-right btn-md">Yes</button>
											</div>
										</form>
									</div>
								</div>
							</div>

							<!-- View DVD Modal -->
							<div class="modal fade" id="viewDVD-{{entry.sku}}">
								<div class="modal-dialog modal-l">
									<div class="modal-content p-2">
										<!-- Modal Header -->
										<div class="modal-header text-left">
											<h3 class="modal-title">View DVD</h3>
											<button type="button" class="close" data-dismiss="modal">&times;</button>
										</div>
										<!-- Modal body -->
										<div class="modal-body">
											<form id="dvd_view_modal" method="POST">{% csrf_token %}
												<!-- Hidden ID Value -->
												<div class="form-row">
													<div class="form-group col-md-6">
														<input name="sku" type="number" class="form-control" id="sku" placeholder="" value={{entry.sku}} required hidden>
													</div>
												</div>

												<!-- Date Registered -->
												<h6>Date Registerede</h6>
												<div class="form-row">
													<div class="form-group col-md-6">
														<label for="date_registered" class="sr-only">First</label>
														<input name="date_registered" type="date" class="form-control" id="date_registered" value={{entry.date_registered|date:'Y-m-d'}} readonly>
													</div>
												</div>	

												<!-- Title -->
												<h6>Title</h6>
												<div class="form-row">
													<div class="form-group col-md-12">
														<label for="title" class="sr-only">Title</label>
														<input name="title" type="text" class="form-control" id="title" placeholder="Title" value={{entry.title}} required>
													</div>
												</div>

												<!-- Genre -->
												<h6>Genre</h6>
												<div class="form-row">
													<div class="form-group col-md-12">
														<label for="cast" class="sr-only">Cast</label>
														<input name="genre" type="text" class="form-control" id="genre" value={{entry.genre}} required>
													</div>
												</div>

												<!-- Director Name -->
												<h6>Director Name</h6>
												<div class="form-row">
													<div class="form-group col-md-6">
														<label for="director_firstname" class="sr-only">First</label>
														<input name="director_firstname" type="text" class="form-control" id="director_firstname" value={{entry.director_firstname}} required>
													</div>
													<div class="form-group col-md-6">
														<label for="director_lastname" class="sr-only">Last</label>
														<input name="director_lastname" type="text" class="form-control" id="director_lastname" value={{entry.director_lastname}} required>
													</div>
												</div>

												<!-- Cast -->
												<h6>Cast</h6>
												<div class="form-row">
													<div class="form-group col-md-12">
														<label for="cast" class="sr-only">Cast</label>
														<input name="cast" type="text" class="form-control" id="cast" value={{entry.cast}} required>
													</div>
												</div>

												<!-- Release Date -->
												<h6>Release Date</h6>
												<div class="form-row">
													<div class="form-group col-md-12">
														<label for="release_date" class="sr-only">Release Date</label>
														<input name="release_date" type="date" class="form-control" id="release_date" value="{{entry.release_date|date:'Y-m-d'}}" required>
													</div>
												</div>

												<!-- Price -->
												<h6>Price</h6>
												<div class="form-row">
													<div class="form-group col-lg-12" id="price">
														<input name="price" type="number" class="form-control" id="price" step="1.00" placeholder="0.00" min="1" max="500" value={{entry.price}} required>
													</div>
												</div>

												<!-- No of items -->
												<h6>Number of Items</h6>
												<div class="form-row">
													<div class="form-group col-lg-12" id="no_items">
														<input name="no_items" type="text" class="form-control" id="no_items" min="1" max="500" value={{entry.no_items}} required>
													</div>
												</div>

												<!-- Movie pic -->
												<h6>Movie Picture</h6>
												<div class="form-row ml-1">
													<div class="form-group">
														<label for="dimg" class="sr-only">Movie picture</label>
														{% if entry.dimg %}
														<img src="{{ entry.dimg.url }}" class="form-control-file" name="dimg" id="dimg">
														{% else %}
														<p>No Picture</p>
														{% endif %}
													</div>
												</div>

												<button id="dvd_cancel" name="dvd_cancel" type="button" class="btn btn-secondary mt-3 float-right btn-md ml-3"
													data-dismiss="modal">Cancel</button>
												<button id="dvd_update" name="dvd_update" type="submit" class="btn btn-success mt-3 float-right btn-md">Update</button>
											</form>
										</div>
									</div>
								</div>
							</div>
						</tr>
					</tbody>
					<tfoot>
					{% endfor %}
					</tfoot>
				</table>
			</div>
		</div>
	</div>

	<!-- footer section-->
	<footer class="ht-footer">
		<div class="container">
			<div class="flex-parent-ft">
				<div class="flex-child-ft item1">
					<a href="{% url 'index_view' %}"><img class="logo" src="{% static 'images/logo1.png' %}" alt=""></a>
					<p>5th Avenue st, manhattan<br>
						New York, NY 10001</p>
					<p>Call us: <a href="#">(+639) 616 042 353</a></p>
				</div>
				<div class="flex-child-ft item2">
					<h4>Resources</h4>
					<ul>
						<li><a href="#">About</a></li>
						<li><a href="#">Contact Us</a></li>
						<li><a href="#">Help Center</a></li>
					</ul>
				</div>
				<div class="flex-child-ft item3">
					<h4>Legal</h4>
					<ul>
						<li><a href="#">Terms of Use</a></li>
						<li><a href="#">Privacy Policy</a></li>
					</ul>
				</div>
				<div class="flex-child-ft item4">
					<h4>Account</h4>
					<ul>
						<li><a href="#">My Account</a></li>
						<li><a href="#">User Guide</a></li>
					</ul>
				</div>
				<div class="flex-child-ft item5">
					<h4>Newsletter</h4>
					<p>Subscribe to our newsletter system now <br> to get latest news from us.</p>
					<form action="#">
						<input type="text" placeholder="Enter your email...">
					</form>
					<a href="#" class="btn">Subscribe now <i class="ion-ios-arrow-forward"></i></a>
				</div>
			</div>
		</div>
		<div class="ft-copyright">
                 				<p><a target="_blank" href="https://www.templateshub.net">Templates Hub</a></p>
			</div>
			<div class="backtotop">
				<p><a href="#" id="back-to-top">Back to top <i class="ion-ios-arrow-thin-up"></i></a></p>
			</div>
		</div>
	</footer>
	{% block footerinclude %}

	<!-- end of footer section-->
	<script src="{% static 'js/jquery.js' %}"></script>
	<script src="{% static 'js/plugins.js' %}"></script>
	<script src="{% static 'js/plugins2.js' %}"></script>
	<script src="{% static 'js/custom.js' %}"></script>

	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
		integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
		crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
		integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
		crossorigin="anonymous"></script>

	<!-- DataTables js with extensions for print copy pdf-->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
	<script type="text/javascript"
		src="https://cdn.datatables.net/v/bs4/jszip-2.5.0/dt-1.10.21/b-1.6.3/b-flash-1.6.3/b-html5-1.6.3/b-print-1.6.3/datatables.min.js"></script>

	<!-- ********************** rows for tables and configurations, should be on the last part**************************** -->
	<script>
		$(document).ready(function () {
			let initialTableSettings = {
				searching: true,
				//Enables print , excel export functionality
				buttons: [
					'print', 'copy', 'pdf', 'excel'
				],
				//Determines how the search, buttons , paginations are shown in your datatable refer to datatables DOM documentation
				dom: 'Bfrtip'
			}
			//Creates the table with the settings above
			let table = $('#ordersTable').DataTable(initialTableSettings);

			$("input[type=date][name$=min]").val(new Date(0).toISOString().slice(0, 10));
			$("input[type=date][name$=max]").val(new Date().toISOString().slice(0, 10));
			//This is the logic that we will use in order to filter the table
			let dateRangeFunc = function (settings, data, dataIndex) {
				let min = new Date($('#min').val()).getTime();
				let max = new Date($('#max').val()).getTime();
				let date = new Date(data[4]).getTime(); // use data for the column to range filter
				if (min <= date && date <= max) {
					return true;
				}
				return false;
			}
			//Sooo, here we will put the custom date range filter to the table
			$.fn.dataTable.ext.search.push(dateRangeFunc);

			//NOW, we need to refresh the table each time so that we could see the filtered data
			$('#min, #max').change(function () {
				table.draw();
			});

			//Resetting the table
			$('#resetDateRange').click(function () {
				$("input[type=date][name$=min]").val(new Date(0).toISOString().slice(0, 10));
				$("input[type=date][name$=max]").val(new Date().toISOString().slice(0, 10));
				table.draw();
			});
		});
	</script>
	
	<script>
		$(document).ready(function () {
			let initialTableSettings = {
				searching: true,
				//Enables print , excel export functionality
				buttons: [
					'print', 'copy', 'pdf', 'excel'
				],
				//Determines how the search, buttons , paginations are shown in your datatable refer to datatables DOM documentation
				dom: 'Bfrtip'
			}
			//Creates the table with the settings above
			let table = $('#dvdTable').DataTable(initialTableSettings);

			$("input[type=date][name$=min]").val(new Date(0).toISOString().slice(0, 10));
			$("input[type=date][name$=max]").val(new Date().toISOString().slice(0, 10));
			//This is the logic that we will use in order to filter the table
			let dateRangeFunc = function (settings, data, dataIndex) {
				let min = new Date($('#min').val()).getTime();
				let max = new Date($('#max').val()).getTime();
				let date = new Date(data[4]).getTime(); // use data for the column to range filter
				if (min <= date && date <= max) {
					return true;
				}
				return false;
			}
			//Sooo, here we will put the custom date range filter to the table
			$.fn.dataTable.ext.search.push(dateRangeFunc);

			//NOW, we need to refresh the table each time so that we could see the filtered data
			$('#min, #max').change(function () {
				table.draw();
			});

			//Resetting the table
			$('#resetDateRange').click(function () {
				$("input[type=date][name$=min]").val(new Date(0).toISOString().slice(0, 10));
				$("input[type=date][name$=max]").val(new Date().toISOString().slice(0, 10));
				table.draw();
			});
		});
	</script>
	{% endblock footerinclude %}
	{% endblock content %}
</body>
</html>